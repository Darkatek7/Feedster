@page "/"

@inject ArticleRepository _articleRepo

<PageTitle>Feedster - Home</PageTitle>
<div>
    <h5 class="mb-2 font-bold tracking-tight dark:text-white" style="font-size: 3.5em; display:inline-block">Home</h5>
    <a class=" text-gray-300 ml-2" style="display:inline-block">v0.6.0</a>
</div>

<!-- ALL ARTICLE CARDS -->
@if (!_articles.Any())
{
    <a>No articles found...</a>
}
else
{
    @foreach (var article in _articles.OrderByDescending(a => a.PublicationDate))
    {
        <ArticleCard article=@article />
    }
}

@code {
    private List<Article> _articles = new();

    protected override async Task OnInitializedAsync()
    {
        await LoadArticles();
    }
    private async Task LoadArticles()
    {
        _articles = (await _articleRepo.GetAll()).OrderByDescending(x => x.PublicationDate).ToList();
    }
}